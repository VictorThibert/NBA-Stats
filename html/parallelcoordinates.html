<script src="http://d3js.org/d3.v3.min.js"></script>
<script src="../scripts/d3.parcoords.js"></script>
<script src="../scripts/sylvester.js"></script>
<script src="../scripts/divgrid.js"></script>
<link rel="stylesheet" type="text/css" href="../css/d3.parcoords.css">

<style type="text/css">
    html, body { background: #f7f7f7; height: 100%; margin: 10; padding: 10; color: #111; font-family: Ubuntu, Helvetica, sans-serif; font-size: 12px; line-height: 1.35em;}
    a { color: #6be; text-decoration: none; }
    .row, .header, .cell { height: 18px; }
    .row, .header { clear: left; }
    .header { font-weight: bold; }
    .cell { float: left; overflow: hidden; white-space: nowrap; width: 120px; }
    .col-0 { width: 120px; }
</style>
<div id="example" class="parcoords" style="width:1200px;height:300px">

<input type="range" min="0" max="0.25" value="0.0" step="0.01" id="smoothness"/></div> 
<div id="grid"></div>

<script>
//data stored in 2d array. inner arrays represent path lines
var data = [];


d3.json("http://cherrypicker.io/php/getplayerbase.php?teamID=1610612737", function(error, raw){
  var i = 0;
  for(i = 0; i < raw.length; i += 1){
    data[i] = [raw[i].PLAYER_NAME, raw[i].MIN, raw[i].FG_PCT, raw[i].FG3_PCT, raw[i].FT_PCT, raw[i].PTS, raw[i].AST, raw[i].REB,, raw[i].STL, raw[i].BLK, raw[i].TOV].map(function(d, i){if ( i == 0 || i == 2 || i == 3 || i == 4) {return d;}
      else {console.log([i,raw[i].PLAYER_NAME, raw[i].GP, raw[i].PTS ]);return  (d / raw[i].GP).toFixed(2);}
  }
      )
  }
  render()
});
var pc;
function render() {

  var color = d3.scale.ordinal()
    .range(["red", "blue"])

  pc = d3.parcoords()("#example")
  
  .data(data)
  .render()
 
  .createAxes();

  pc.ctx.foreground.lineWidth = 1.5;
  pc.ctx.foreground.globalCompositeOperation = "darken";

  pc
    .smoothness(0)
    .alpha(0.3)
    .composite("darken")
    .rate(60)
    .margin({ top: 24, left: 20, bottom: 12, right: 0 })
    .autoscale()
    .color(function(d) {return color("red"); })
    .render()
    .brushMode("1D-axes");

    d3.select("#smoothness").on("change", function() {
    d3.select("#smooth").text(this.value);
    pc.smoothness(this.value).render();
  });

}


</script>


<script>
var grid = d3.divgrid();
var data2 = [];

d3.json("http://cherrypicker.io/php/getplayerbase.php?teamID=1610612737", function(error, raw){
  var i = 0;
  for(i = 0; i < raw.length; i += 1){
    data2[i] = [raw[i].PLAYER_NAME, raw[i].MIN, raw[i].FG_PCT, raw[i].FG3_PCT, raw[i].FT_PCT, raw[i].PTS, raw[i].AST, raw[i].REB,, raw[i].STL, raw[i].BLK, raw[i].TOV].map(function(d, i){if ( i == 0 || i == 2 || i == 3 || i == 4) {return d;}
      else {return  (d / raw[i].GP).toFixed(2);}
  }
      )
  }
  d3.select('#grid')
    .datum(data2)
    .call(grid)
    .selectAll(".row")
    .on({
      "mouseover": function(d) { pc.highlight([d]) },
      "mouseout": pc.unhighlight
    });

    pc.on("brush", function(d) {
    d3.select("#grid")
      .datum(d)
      .call(grid)
      .selectAll(".row")
      .on({
        "mouseover": function(d) { pc.highlight([d]) },
        "mouseout": pc.unhighlight
      });
   });   
});
</script>

<script>